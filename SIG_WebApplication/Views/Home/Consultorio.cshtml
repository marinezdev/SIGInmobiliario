
@{
    ViewBag.Title = "Consultorio";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<link href="https://cdnjs.cloudflare.com/ajax/libs/icheck-bootstrap/3.0.1/icheck-bootstrap.min.css" rel="stylesheet">

<style>
    .card {
        position: relative;
        font-family: 'Proxima Nova',-apple-system,'Helvetica Neue',Helvetica,Roboto,Arial,sans-serif;
        display: -ms-flexbox;
        display: flex;
        -ms-flex-direction: column;
        flex-direction: column;
        min-width: 0;
        word-wrap: break-word;
        background-color: #fff;
        background-clip: border-box;
        border: 1.5px solid rgba(0,0,0,.125);
        border-radius: .25rem;
        -webkit-box-shadow: 0px 0px 5px -1px rgba(0,0,0,0.100);
        -moz-box-shadow: 0px 0px 5px -1px rgba(0,0,0,0.100);
        box-shadow: 0px 0px 5px -1px rgba(0,0,0,0.100);
    }

    .card-title {
        margin-bottom: .75rem;
        font-family: 'Proxima Nova',-apple-system,'Helvetica Neue',Helvetica,Roboto,Arial,sans-serif;
        font-size: 14px;
        font-weight: bold;
    }

    .card-top-bar {
        height: 6px;
        background: #00d2ff;
        background: -webkit-linear-gradient(to right, #3a7bd5, #00d2ff);
        background: linear-gradient(to right, #3a7bd5, #00d2ff);
    }

    .btn {
        display: inline-block;
        font-weight: 400;
        height: 40px;
        text-align: center;
        white-space: nowrap;
        vertical-align: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        border: 1px solid transparent;
        padding: .5rem .75rem;
        font-size: 1rem;
        line-height: 1.25;
        border-radius: .25rem;
        transition: all .15s ease-in-out;
        font-family: 'Proxima Nova',-apple-system,'Helvetica Neue',Helvetica,Roboto,Arial,sans-serif;
        border-color: #17a2b8;
        background-color: #17a2b8;
        color: #ffffff;
    }

        .btn:hover {
            border-color: #17a2b8;
            background-color: #f8f9fa;
            color: #17a2b8;
        }

    .thumb-image {
        width: 500px;
    }

        .thumb-image > img {
            width: 100%;
        }


    .offer-box, .slide {
        color: #009688;
        font-size: 13px;
        padding: 2px 15px;
        font-family: 'Poppins', sans-serif;
    }

    .single-product-slider .carousel-control-prev {
        bottom: auto;
        background: #111111;
        width: 6%;
        padding: 10px 0;
        background-image: none;
        top: 40%;
    }

    .single-product-slider .carousel-control-next {
        bottom: auto;
        background: #111111;
        width: 6%;
        padding: 10px 0;
        background-image: none;
        top: 40%;
    }

    .carousel-indicators {
        position: relative;
        bottom: 0;
        background: #000000;
    }

    .product-details .product-btns li + li {
        margin-left: 15px;
    }

    .product-details .product-btns li {
        display: inline-block;
        text-transform: uppercase;
        font-size: 12px;
    }

    .product-details .product-btns li {
        display: inline-block;
        text-transform: uppercase;
        font-size: 12px;
    }
</style>
<style>
    #morecss-trigger-toggle {
        cursor: pointer;
    }

    #morecss-element-toggle {
        display: none;
    }

        #morecss-element-toggle:not(:checked) ~ #morecss-toggled-element {
            display: none;
        }

        #morecss-element-toggle:not(:checked) ~ #morecss-trigger-toggle .lesslink {
            display: none;
        }

        #morecss-element-toggle:checked ~ #morecss-abstract {
            display: none;
        }

        #morecss-element-toggle:checked ~ #morecss-trigger-toggle .morelink {
            display: none;
        }

    #morecss .morelink, #morecss .lesslink {
        display: block;
        cursor: pointer;
        color: #2196f3;
    }

        #morecss .morelink:hover, #morecss .lesslink:hover {
            text-decoration: underline;
        }
</style>

<br />
<br />


<div class="container bg0 p-t-75 p-b-85">
    <div class="row">
        <div class="container">
            <div class="p-b-32">
                <h1>
                    <strong>Consultorios disponibles</strong>
                </h1>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card" style="width: 100%;">
                <div class="card-body">
                    <p class="card-text" style="font-style: oblique;">Al realizar algún movimiento, se iniciará la búsqueda  </p>
                    <br>
                    <div class="text-right">
                        <button class="btn my-2 my-sm-0 col-md-12" onclick="LimpiarFiltros()"><i class="fa fa-repeat" aria-hidden="true"></i> Limpiar filtros </button>
                    </div>
                    <br />
                    <hr />
                    <h5 class="card-title">Tipo de operación</h5>
                    @{
                        foreach (var dt in ViewBag.subCategorias)
                        {
                            <div class="radio icheck-info">
                                <input type="radio" id="primary_@dt.Id" value="@dt.Id" name="primaryTOP" onchange="BusquedaParametros()" />
                                <label for="primary_@dt.Id">@dt.Nombre</label>
                            </div>
                        }
                    }
                </div>
            </div>
        </div>
        <div class="col-md-9">
            <div class="row">
                @if (ViewBag.Total == 0)
                {
                    <div class="row">
                        <div class="col-sm-12 col-sm-offset-2 text-center">
                            <hr />
                            <br />

                            <h1 style="color:#17a2b8"><strong>¡Uuups!</strong> </h1>
                            <h5 style="padding:30px; "><strong>En este momento no hay inmuebles como el que buscas.</strong> </h5>
                            <h1 style="padding:3px; font-size:100px"><strong><i class="fa fa-search-minus" aria-hidden="true"></i></strong> </h1>
                            <div class="description">
                                <p>

                                    ¿Y si pruebas limpiando los filtros para encontrar más opciones?
                                    <br />

                                    <br />
                                </p>
                            </div>
                        </div>
                    </div>
                }
                else
                {
                    <p class="card-text" style="text-align:right"> @ViewBag.TotalText </p>
                }
            </div>
            <div class="row">
                @Html.Raw(ViewBag.inmuebles)
            </div>
        </div>
    </div>
</div>
<br />
<br />

<div class="bg6 flex-c-m flex-w size-302 m-t-0 p-tb-15">
    <span class="stext-107 cl6 p-lr-25">

    </span>

    <span class="stext-107 cl6 p-lr-25">
        Categoría: Casas
    </span>
</div>

<!-- Related Products -->
<section class="sec-relate-product bg0 p-t-45 p-b-105">
    <div class="container">
        <div class="p-b-45">
            <h3 class="ltext-106 cl5 txt-center">
                Publicaciones relacionadas
            </h3>
        </div>

        <!-- Slide2 -->
        <div class="wrap-slick2">
            <div class="slick2">

                @Html.Raw(ViewBag.inmueblesRamdom)


            </div>
        </div>
    </div>
</section>


<!-- Modal1 -->
<div class="wrap-modal1 js-modal1 p-t-60 p-b-20">
    <div class="overlay-modal1 js-hide-modal1"></div>

    <div class="container">
        <div class="bg0 p-t-60 p-b-30 p-lr-15-lg how-pos3-parent">
            <button class="how-pos3 hov3 trans-04 js-hide-modal1">
                <img src="~/images/icons/icon-close.png" alt="Cerrar" />
            </button>

            <div class="row">
                <div class="col-md-6 col-lg-7 p-b-30">
                    <div class="p-l-25 p-r-30 p-lr-0-lg">
                        <div id="Galeria">
                        </div>
                    </div>
                </div>

                <div class="col-md-6 col-lg-5 p-b-30">
                    <div class="p-r-50 p-t-5 p-lr-0-lg">
                        <h4 class="mtext-105  js-name-detail ">
                            <strong><label id="m_titulo"></label> </strong>

                        </h4>
                        <h4 class="mtext-106 cl2">
                            <label id="m_SuperficieT"></label>
                        </h4>
                        <h4 class="mtext-106 cl2">
                            <label id="m_Superficie"></label>
                        </h4>

                        <p class="mtext-102">
                            <label id="m_TipoCategoria"></label>
                        </p>
                        <p class="stext-102">
                            <label id="m_direccion"></label>
                        </p>
                        <h4 class="mtext-106 cl2">
                            <label id="m_precio"></label>
                        </h4>
                        <hr />

                        <div class="">
                            <textarea rows="10" cols="80" class="form-control" disabled="" placeholder="" id="m_Descripcion"></textarea>
                        </div>


                        <!--  -->
                        <div class="p-t-33 text-center">
                            <div class="text-center">
                                <div class="size-204 flex-w flex-m respon6-next text-center">
                                    <div id="MasInformacion">
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr />
                    </div>
                </div>
            </div>
        </div>
        <div class="bg6 flex-c-m flex-w size-302 m-t-0 p-tb-15">
            <span class="stext-107 cl6 p-lr-25">
            </span>

            <span class="stext-107 cl6 p-lr-25">
                Categoría: Consultorio
            </span>
        </div>
    </div>
</div>



<script>
    $(document).ready(function(){
        jQuery("#primary_@ViewBag.TipoOperacion").attr('checked', true);
    });

    function LimpiarFiltros() {
         window.location.href = '@Url.Action("Consultorio","Home")';
    }

    function BusquedaParametros() {


        var tiop = $('input:radio[name=primaryTOP]:checked').val();

        window.location.href = '@Url.Action("Consultorio","Home")?tiop=' + tiop ;
    }


    function AgregarInteres(inmueble)
    {
        var obj = {};
        obj['IdInmueble'] = inmueble;
        var jsonObject = {
            "Interes": obj
        };

        $.ajax({
            url: "@Url.Action("AgregarInteres", "Interes")",
            type: "POST",
            data: JSON.stringify(jsonObject),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            error: function (response) {
                alert("MANDAR MENSAJE SE ERROR");
            },
            success: function (response) {
                if (response.Respuesta) {
                    swal({
                        title: "Agregado a mi interés !",
                        text: response.RespuestaText,
                        icon: "success",
                        button: "Aceptar",
                    });

                    $('#BtIconsnInteres').attr('data-notify', response.Contenido);
                    $('#BtIconsnInteres2').attr('data-notify', response.Contenido);
                }
                else {
                    swal({
                        title: "Algo ocurrió !",
                        text: response.RespuestaText,
                        icon: "warning",
                        button: "Aceptar",
                    });
                }
            }
        });
    }

    function AgregarComparar(inmueble)
    {
        var obj = {};
        obj['IdInmueble'] = inmueble;
        var jsonObject = {
            "Comparar": obj
        };

        console.log(obj);

        $.ajax({
            url: "@Url.Action("AgregarComparar", "Comparar")",
            type: "POST",
            data: JSON.stringify(jsonObject),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            error: function (response) {
                alert("MANDAR MENSAJE SE ERROR");
            },
            success: function (response) {
                if (response.Respuesta) {
                    swal({
                        title: "Agregado a Comparar !",
                        text: response.RespuestaText,
                        icon: "success",
                        button: "Aceptar",
                    });

                    $('#BtIconsnComparar').attr('data-notify', response.Contenido);
                    $('#BtIconsnComparar2').attr('data-notify', response.Contenido);
                }
                else {
                    swal({
                        title: "Algo ocurrió !",
                        text: response.RespuestaText,
                        icon: "warning",
                        button: "Aceptar",
                    });
                }
            }
        });
    }

    function VistaRapida(inmueble) {

        var obj = {};
        obj['IdInmueble'] = inmueble;
        var jsonObject = {
            "InmueblesImg": obj
        };

        $.ajax({
            url: "@Url.Action("InmueblesImgs", "Home")",
            type: "POST",
            data: JSON.stringify(jsonObject),
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            error: function (response) {
                alert("MANDAR MENSAJE SE ERROR");
            },
            success: function (response) {
                PintaGaleria(response);

                $.ajax({
                    url: "@Url.Action("Inmuebles", "Home")",
                    type: "POST",
                    data: JSON.stringify(jsonObject),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    error: function (response) {
                        alert("MANDAR MENSAJE SE ERROR");
                    },
                    success: function (response) {
                        PintaInformacion(response);
                    }
                });
            }
        });

    }

    function PintaGaleria(Contenido) {
        $('#Galeria').html('');
        var Galeria = '';

        if (Contenido.length > 5) {
            if (Contenido.length > 0) {

                var contadores = 0;
                var activado2 = 0;

                Galeria = '<div id="carousel-example-1" class="single-product-slider carousel slide" data-ride="carousel" data-interval="3000">' +
                    '<div class="carousel-inner" role="listbox">';

                
              
                for (var a = 0; a < Contenido.length; a++)
                {
                    if (contadores == 0) {
                        Galeria += '<div class="carousel-item active"> <img class="d-block w-100" src="http://' + Contenido[a].Descripcion + '"> </div>';
                        contadores = contadores + 1;
                    } else {
                        Galeria +=              '<div class="carousel-item"> <img class="d-block w-100" src="http://' + Contenido[a].Descripcion + '" alt="Third slide"> </div>';
                    }

                }

                
              Galeria +=  '</div>' +
                    '<a class="carousel-control-prev" href="#carousel-example-1" role="button" data-slide="prev">' +
                        '<i class="fa fa-angle-left" aria-hidden="true"></i>' +
                        '<span class="sr-only">Previous</span>' +
                    '</a>' +
                    '<a class="carousel-control-next" href="#carousel-example-1" role="button" data-slide="next">' +
                        '<i class="fa fa-angle-right" aria-hidden="true"></i>' +
                        '<span class="sr-only">Next</span>' +
                    '</a>' +
                    '<ol class="carousel-indicators">';
                    for (var a = 0; a < Contenido.length; a++)
                    {
                        if (activado2 == 0) {
                            Galeria += '<li data-target="#carousel-example-1" data-slide-to="' + a + '" class="active">' +
                                            '<img class="d-block w-100 img-fluid" src="http://' + Contenido[a].Descripcion + '" />' +
                                        '</li>';
                            activado2 = activado2 + 1
                        } else {
                            Galeria += '<li data-target="#carousel-example-1" data-slide-to="' + a + '">' +
                                            '<img class="d-block w-100 img-fluid" src="http://' + Contenido[a].Descripcion + '" alt="" />' +
                                        '</li>';
                        }
                    }



             Galeria +=       '</ol>' +
                '</div>';

                $('#Galeria').html(Galeria);
            }
        } else {
            if (Contenido.length > 0) {
                Galeria += '<div class="wrap-slick3 flex-sb flex-w">' +
                    '<div class="wrap-slick3-dots"></div>' +
                    '<div class="wrap-slick3-arrows flex-sb-m flex-w"></div>' +
                    '<div class="slick3 gallery-lb">';

                for (var b = 0; b < Contenido.length; b++) {
                    Galeria += '<div class="item-slick3" data-thumb="http://' + Contenido[b].Descripcion + '">' +
                        '<div class="wrap-pic-w pos-relative">' +
                        '<img src="http://' + Contenido[b].Descripcion + '" alt="IMG-PRODUCT">' +
                        //'<a class="flex-c-m size-108 how-pos1 bor0 fs-16 cl10 bg0 hov-btn3 trans-04" href="https://' + Contenido[b].Descripcion + '">' +
                        //'<i class="fa fa-expand"></i>' +
                        //'</a>' +
                        '</div>' +
                        '</div>';
                }

                Galeria += '</div>' +
                    '</div>';
            }
            $('#Galeria').html(Galeria);

            $('.wrap-slick3').each(function () {

                $(this).find('.slick3').slick({
                    slidesToShow: 1,
                    slidesToScroll: 1,
                    fade: true,
                    infinite: true,
                    autoplay: false,
                    autoplaySpeed: 6000,

                    arrows: true,
                    appendArrows: $(this).find('.wrap-slick3-arrows'),
                    prevArrow: '<button class="arrow-slick3 prev-slick3"><i class="fa fa-angle-left" aria-hidden="true"></i></button>',
                    nextArrow: '<button class="arrow-slick3 next-slick3"><i class="fa fa-angle-right" aria-hidden="true"></i></button>',



                    dots: true,
                    centerMode: true,
                    focusOnSelect: true,
                    appendDots: $(this).find('.wrap-slick3-dots'),
                    dotsClass: 'slick3-dots',
                    customPaging: function (slick, index) {
                        var portrait = $(slick.$slides[index]).data('thumb');
                        return '<img src=" ' + portrait + ' "/><div class="slick3-dot-overlay"></div>';
                    },
                });
            });
        }
    }


    function PintaInformacion(data) {
        console.log(data)
        $("#m_titulo").text( data.Titulo );
        $("#m_Superficie").text('Área construida : ' + data.Superficie + " " + data.UnidadMedidaAbre);
        $("#m_SuperficieT").text('Área terreno: ' + data.SuperficieT + " " + data.UnidadMedidaAbre);
        $("#m_TipoCategoria").html('<strong>Categoría: </strong>' + data.TipoCategoria + ','+data.SubCategoria );
        //$("#m_TipoCategoriaS").html('<strong>Categoría: </strong>' + data.TipoCategoria);
        $("#m_direccion").html(data.Estado + ", " + data.Poblacion + ", " + data.CP + ", " + data.Colonia);
        $("#m_precio").html(data.Precio + " " + data.NombreMoneda);
        $("#m_Descripcion").html(data.Descripcion);

        $("#MasInformacion").html('<a href="@Url.Action("InmuebleDetalle", "Home")?Inm=' + data.IdCf + '" class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04 ">Mas información</a>');

    }

</script>
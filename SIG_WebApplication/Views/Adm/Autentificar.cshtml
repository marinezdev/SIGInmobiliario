<link href="~/Content/css/login/Style.css" rel="stylesheet" />

<style>
    .form-bottom {
        padding: 25px 25px 30px 25px;
        background: #ffffff;
        /* background: rgba(0, 0, 0, 0.3); */

        -moz-border-radius: 0 0 4px 4px;
        -webkit-border-radius: 0 0 4px 4px;
        border-radius: 0 0 4px 4px;
        text-align: left;
        /*border-radius: 10px 10px 10px 10px;
        -moz-border-radius: 10px 10px 10px 10px;
        -webkit-border-radius: 10px 10px 10px 10px;*/
        border: 1px solid #15436d;
    }
</style>
<!-- Title page -->
<section class="bg-img1 txt-center p-lr-15 p-tb-42" style="background-image: url('../../images/Headers/offica-home.JPG'); text-align:center;">
    <div class=" h-full p-t-0 p-b-0 respon5" style="text-align:center;">
        <div class="layer-slick1 animated " style="text-align:center;">
            <br /><br /><br /><br /><br />
            <h2 class="ltext-201 cl2 p-t-19 p-b-43 respon1 text-center" style="font-size: 30px; width:100%; text-align:center;font-family: "Proxima Nova",-apple-system,"Helvetica Neue",Helvetica,Roboto,Arial,sans-serif;">
                &nbsp;Autorización de registro   <span style="color: #dc8505"> </span>&nbsp;
            </h2>
            <br /><br /><br />
        </div>
    </div>
</section>


<!-- Top content -->
<div class="top-content">
    <div class="inner-bg">
        <div class="container">
            @if (ViewBag.Resultado == 1)
            {
                <div class="row">
                    <div class="col-sm-12 col-sm-offset-2 text-center">
                        <h1 style="padding:30px"><strong>Bienvenido</strong> </h1>
                        <div class="description">
                            <p>
                                <strong>Esta página quedara bloqueada una vez realizada la autorización de tu usuario.</strong>
                                <br />
                                Al inciar sesión estás aceptando los <a href="#"><strong>Términos y condiciones de Uso </strong></a>
                                <br />
                            </p>
                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-3">
                    </div>
                    <div class="col-sm-6 form-box">
                        <div class="form-top">
                            <div class="form-top-left">
                                <h3>Iniciar sesión </h3>
                                <br />
                                <p>Registro finalizado:</p>
                            </div>
                            <div class="form-top-right">
                                <i class="fa fa-user-circle-o" aria-hidden="true"></i>
                            </div>
                        </div>
                        <div class="form-bottom">
                            <form role="form" action="">
                                <div class="description text-justify">
                                    <img src="~/images/icons/Logo.png" width="80" height="80" class="logo" />
                                    <br />
                                    <p>
                                        Tu registro a finalizado, estas son tus credenciales de acceso, una vez iniciado sesión puedes cambiar tu password.
                                        <br />
                                    </p>
                                    <hr />
                                    <p>Nombre:<strong>@ViewBag.Nombre  @ViewBag.Apellidos</strong> </p>
                                    <p>Email: <strong>@ViewBag.Email</strong></p>
                                    <p>Teléfono: <strong>@ViewBag.Telefono</strong></p>
                                    <p>Teléfono móvil: <strong>@ViewBag.TelefonoMovil</strong></p>
                                    <hr />
                                    <p>Usuario ID: <strong>@ViewBag.Email</strong></p>
                                    <p>Password:  <strong>@ViewBag.Password</strong></p>
                                </div>
                                <br />
                                <div id='alertBoxes'></div><span class='timer' id='timer'></span>
                                <br />
                                <button id="BtnRegistrar" type="button"  class="btn">Iniciar sesión</button>
                            </form>
                        </div>
                    </div>
                    <div class="col-sm-3">
                    </div>

                </div>
            }
            else if (ViewBag.Resultado == 2)
            {
                <div class="row">
                    <div class="col-sm-12 col-sm-offset-2 text-center">
                        <h1 style="padding:30px"><strong>Esta página no está disponible para ti.</strong> </h1>
                        <h1 style="padding:3px; font-size:150px"><strong><i class="fa fa-low-vision" aria-hidden="true"></i></strong> </h1>
                        <div class="description">
                            <p>
                                <strong>El acceso al sitio es único, pero puedes crear tu cuenta ahora, da clic en el siguiente link..</strong>
                                <br />
                                No tengo cuenta,  <a href="@Url.Action("Registrar", "Adm")"><strong>registrar </strong></a>
                                <br />
                            </p>
                        </div>
                    </div>
                </div>
            }
            else if (ViewBag.Resultado == 3)
            {
                <div class="row">
                    <div class="col-sm-12 col-sm-offset-2 text-center">
                        <h1 style="padding:30px"><strong>Pagina no disponible</strong> </h1>
                        <h1 style="padding:3px; font-size:150px"><strong><i class="fa fa-user-circle-o" aria-hidden="true"></i></strong> </h1>
                        <div class="description">
                            <p>
                                Esta pagina no esta disponible para ti, <strong>pero puedes crear tu cuenta ahora.</strong>
                                <br />
                                No tengo cuenta,  <a href="@Url.Action("Registrar", "Adm")"><strong>registrar </strong></a>
                                <br />
                            </p>
                        </div>
                    </div>
                </div>
            }
            else if (ViewBag.Resultado == 4)
            {
                <div class="row">
                    <div class="col-sm-12 col-sm-offset-2 text-center">
                        <h1 style="padding:30px"><strong>Los sentimos, pero el link ya no esta disponible</strong> </h1>
                        <h1 style="padding:3px; font-size:150px"><strong><i class="fa fa-user-circle-o" aria-hidden="true"></i></strong> </h1>
                        <div class="description">
                            <p>
                                Si tienes problemas con tu usuario por bloqueo, o no recuerdas tu password, utiliza nuestras herramientas de recuperación de credenciales disponibles en el siguiente link
                                <br />
                                 <a href="@Url.Action("Registrar", "Adm")"><strong> Recuperar password </strong></a>
                                <br />
                            </p>
                        </div>
                    </div>
                </div>
            }
        </div>
    </div>
</div>


<br />
<br />
<br />
<div class="bg6 flex-c-m flex-w size-302 ">
    <span class="stext-107 cl6 p-lr-25">

    </span>

    <span class="stext-107 cl6 p-lr-25">

    </span>
</div>


<script>
    $(document).ready(function () {
        var timeSlide = 500;
        $('#timer').hide(0);
        $('#timer').css('display', 'none');
        $('#BtnRegistrar').click(function () {
            $('.box-success,.box-error').slideUp(timeSlide);
            setTimeout(function () {
                    $('#timer').fadeOut(300);
                    $('#alertBoxes').html('<div class="box-error"></div>');
                    $('.box-error').hide(0).html("Enviado <img src='/images/icons/ajax-loader.gif' width='20px' height='20px'/>");
                    $('.box-error').slideDown(timeSlide);

                    var arreglo = [];
                    var obj = {};

                    obj['Email'] = '@ViewBag.Email';
                    obj['Password'] = '@ViewBag.Password';

                    var jsonObject = {
                        "Usuarios": obj
                    };

                    //console.log(jsonObject);
                    $.ajax({
                        url: "@Url.Action("Iniciar", "Adm")",
                        type: "POST",
                        data: JSON.stringify(jsonObject),
                        contentType: "application/json; charset=utf-8",
                        dataType: "json",
                        error: function (response) {
                            $('#timer').fadeOut(300);
                            $('#alertBoxes').html('<div class="box-error"></div>');
                            $('.box-error').hide(0).html('');
                            $('.box-error').slideDown(timeSlide);

                            swal({
                              title: "Algo ocurrió !",
                              text: "Ha ocurrido un problema, inténtalo mas tarde ",
                              icon: "warning",
                              button: "Aceptar",
                            });
                        },
                        success: function (response) {
                            $('#timer').fadeOut(300);
                            $('#alertBoxes').html('<div class="box-error"></div>');
                            $('.box-error').hide(0).html('');
                            $('.box-error').slideDown(timeSlide);

                            console.log(response);

                            if (response.Email.length>2) {
                                window.location.href = "@Url.Action("Index", "business")";
                            }
                            else {
                                swal({
                                  title: "Algo ocurrió !",
                                  text: response.Contenido,
                                  icon: "warning",
                                  button: "Aceptar",
                                });
                            }
                        }
                    });

                
            }, timeSlide);
            return false;

        });
    });
</script>